---
category: shader
tags: [U3D, Shader,Cookbook,中文版]
---

## 第八章 通过Unity渲染纹理实现屏幕效果   
我们在这一章会学习下面的这些知识点：    
- 设置屏幕效果脚本系统
- 在屏幕效果中使用亮度, 饱和度和对比度
- 在屏幕效果中使用基础类Photoshop混合模式
- 屏幕效果中的覆盖混合模式

- **介绍**   
  学习编写着色器最让人印象深刻的是创建你自己的屏幕效果的过程，也就是常说的后处理。有了这些屏幕效果，我们就可以用 **Bloom**，**Motion Blur** 和 **HDR** 效果等技术创建出一些惊奇的实时图像。当今游戏市场推出的大部分游戏在 **景深（depth of field）** 效果，**辉光（bloom）** 效果甚至 **颜色修正（color correction）** 效果上都大量使用了屏幕效果。   
  <br>
  通过这个章节，你将会学习如何构建一个如何去控制这些屏幕效果的脚本系统。我们将会涵盖 **渲染纹理（Render Texture）**，**深度缓冲（depth buffer）**，以及如何创建一个类Photoshop感的效果，从而去控制游戏的最终渲染图片的效果。通过为你的游戏使用屏幕效果，你不经可以完成你的着色器编写知识，同时你还将会拥有在Unity中创自己那些不可思议的渲染器的能力。

*** 
<br>

- **设置屏幕效果脚本系统**   
  创建屏幕效果是这么一个过程，我们先抓取一张全屏的图像（或者纹理），然后用一个着色器在GPU中去处理它的像素，之后再把它发回给Unity的渲染器并且应用到游戏的整个渲染好的图像上去。这样的话就允许我们实时的在游戏的渲染图片上进行逐像素操作了，从而使我们对艺术效果有更广的控制。   
  <br>
  试想一下如果你不得不仔细检查并且调节你游戏中每一个游戏对象上的每个材质，而这么做仅仅是想调节游戏最终视效的对比度。尽管可行，但还是有点费事。通过利用屏幕效果，我们就可以整个的调整屏幕的最终效果，因此对于有些最终呈现我们能获得更强的 **类Photoshop（Photoshop-like）** 的控制。   
  <br>
  为了建立起一个屏幕效果系统并且使它成功运行，我们需要准备一个脚本来跟游戏当前的渲染图片进行通信，这个 **渲染图片（rendered image）** 就是Unity中的 **渲染纹理（Render Texture）**。利用这个脚本将渲染纹理传给着色器，我们能创建一个灵活的系统来创建屏幕效果。对于我们的第一个屏幕效果，我们将创建一个非常简单的灰度效果，这个效果可以让我们的游戏看起来是黑白的效果。让我们拭目以待。   

***
<br>

- **始前准备**   
  为了构建好我们的屏幕效果系统并且顺利运行，我们需要为当前的Unity工程创建一些资产。为了获得这些，跟着下面的步骤走就对了：   
  - 1.在当前的项目中，我们创建一个名为 **TestRenderImage.cs** 的脚本。
  - 2.创建一个新的着色器，命名为 **ImageEffect.shader**。
  - 3.在场景中新建一个球体并且为其添加一个新的材质球，新材质可以任意，比如我们创建了一个简单的红色的，带有高光的材质球。
  - 4.最后，创建一个新的方向光，然后保存场景。   

  当我们把所有的资源准备好后，就等于是简单的设置好了场景，看起来就跟下图一样：   
  ![diagram](https://linkliu.github.io/game-tech-post/assets/img/shader_book/diagram84.png){:  .shadow width = "90%" }   